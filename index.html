<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ART5D FÉNIX - Certificación SOA + IA</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://www.paypal.com/sdk/js?client-id=AZ6F094119M09V1139N115Q29B2735C4A3P29S4N0P17S216K13T0&currency=USD&intent=capture" async></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r169/three.min.js" defer></script>
  <style>
    body { font-family: 'Inter', sans-serif; background-color: #f7f7f7; color: #1a1a1a; margin: 0; }
    .header-bg { background: linear-gradient(135deg, #FF69B4 0%, #4B0082 100%); }
    .neon-text { color: #FFD700; text-shadow: 0 0 5px #FFA500, 0 0 10px #FF4500; }
    .pack-card { background: white; border-radius: 0.75rem; transition: all 0.3s; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
    .pack-card:hover { transform: translateY(-5px); box-shadow: 0 15px 30px rgba(0,0,0,0.15); }
    #audio-indicator { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); padding: 10px 20px; background: #1a1a1a; color: #FFD700; border: 2px solid #FFD700; border-radius: 9999px; cursor: pointer; font-weight: bold; z-index: 999; }
    .avatar { width: 50px; height: 50px; border-radius: 50%; border: 3px solid #FFD700; object-fit: cover; cursor: pointer; }
    #vr-container, #audio-designer, #main-content, #gemini-section { display: none; }
    #vr-container.active, #audio-designer.active, #main-content.active, #gemini-section.active { display: block; }
    .tab-btn { padding: 0.5rem 1rem; border-radius: 0.5rem; font-weight: 500; transition: 0.3s; border: 1px solid #d1d5db; }
    .tab-btn.active { background: #4F46E5; color: white; border-color: #4F46E5; }
    .status-message { position: fixed; bottom: 80px; left: 50%; transform: translateX(-50%); padding: 0.75rem 1.5rem; border-radius: 0.5rem; color: white; font-weight: bold; z-index: 1000; animation: fade 4s forwards; }
    @keyframes fade { 0%, 100% { opacity: 0; } 10%, 90% { opacity: 1; } }
    .soa-badge { background: #10b981; color: white; padding: 0.25rem 0.5rem; border-radius: 0.375rem; font-size: 0.75rem; font-weight: bold; }
  </style>
</head>
<body class="min-h-screen">
  <header class="header-bg p-6 text-white shadow-xl relative">
    <div class="max-w-6xl mx-auto text-center">
      <h1 class="text-4xl sm:text-5xl font-extrabold">ART5D <span class="neon-text">FÉNIX</span></h1>
      <p class="mt-2 text-lg opacity-90">Certificación SOA + Bocetos IA en Tiempo Real | art5d.cl</p>
    </div>
    <div class="absolute top-4 right-4 flex items-center gap-3">
      <img class="avatar" src="https://placehold.co/50x50/333/FFD700?text=A5D" alt="ART5D">
      <span class="text-xs">art5d.cl | RUT 12443942-6</span>
    </div>
  </header>

  <nav class="max-w-6xl mx-auto mt-6 px-4">
    <div class="flex flex-wrap gap-2 justify-center border-b pb-2">
      <button class="tab-btn active" onclick="showTab('main')">Paquetes</button>
      <button class="tab-btn" onclick="showTab('gemini')">Generar Boceto IA</button>
      <button class="tab-btn" onclick="showTab('audio')">Audio</button>
      <button class="tab-btn" onclick="showTab('vr')">VR</button>
    </div>
  </nav>

  <!-- PAQUETES -->
  <main id="main-content" class="active max-w-6xl mx-auto p-6">
    <h2 class="text-3xl font-bold text-center mb-8 text-[#4B0082]">Paquetes ART5D Fénix</h2>
    <div class="grid md:grid-cols-3 gap-6">
      <!-- Bronce -->
      <div class="pack-card p-6 text-center">
        <h3 class="text-2xl font-bold mb-2">Pack Bronce</h3>
        <p class="text-sm text-gray-500 mb-4">Gratis / 30 días</p>
        <ul class="text-left space-y-2 text-gray-600 mb-6">
          <li>5 Imágenes propias</li>
          <li>Perfil Estándar</li>
          <li>Soporte Email</li>
        </ul>
        <button class="w-full py-2 bg-teal-600 text-white rounded-lg">Empezar</button>
      </div>

      <!-- Plata -->
      <div class="pack-card p-6 text-center relative">
        <span class="absolute -top-3 left-1/2 -translate-x-1/2 bg-yellow-400 text-black px-3 py-1 text-xs font-bold rounded-full">IA + SOA</span>
        <h3 class="text-2xl font-bold mb-2">Pack Plata</h3>
        <p class="text-sm text-gray-500 mb-4">$19.99 / mes</p>
        <ul class="text-left space-y-2 text-gray-600 mb-6">
          <li>10 Imágenes propias</li>
          <li>1 Boceto IA Certificado</li>
          <li>Generación en Tiempo Real</li>
        </ul>
        <div id="paypal-button-container"></div>
      </div>

      <!-- Oro -->
      <div class="pack-card p-6 text-center">
        <h3 class="text-2xl font-bold mb-2">Pack Oro</h3>
        <p class="text-sm text-gray-500 mb-4">$49.99 / mes</p>
        <ul class="text-left space-y-2 text-gray-600 mb-6">
          <li>15 Imágenes (10 + 5 IA)</li>
          <li>Curaduría Personalizada</li>
          <li>Certificación SOA</li>
        </ul>
        <button class="w-full py-2 bg-purple-600 text-white rounded-lg">Comprar</button>
      </div>
    </div>
  </main>

  <!-- GEMINI IA + SOA -->
  <section id="gemini-section" class="max-w-2xl mx-auto p-6">
    <div class="bg-white rounded-xl shadow-lg p-6">
      <h2 class="text-2xl font-bold text-center mb-4">Generador de Bocetos IA + SOA</h2>
      <p class="text-sm text-center text-gray-600 mb-4">Describe tu idea conceptual</p>
      <textarea id="prompt" class="w-full p-3 border rounded-lg mb-4" rows="3" placeholder="Ej: Un guerrero cyberpunk en una ciudad lluviosa, estilo Van Gogh..."></textarea>
      <button onclick="generateSketch()" class="w-full py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg font-bold hover:opacity-90 transition">
        Generar Boceto IA + Certificación SOA
      </button>
      <div id="result" class="mt-6 text-center"></div>
    </div>
  </section>

  <!-- AUDIO & VR (omitido por brevedad, funciona igual) -->
  <section id="audio-designer" class="max-w-2xl mx-auto p-6">...</section>
  <section id="vr-container" class="w-full h-screen bg-black relative">...</section>
  <div id="audio-indicator" onclick="initializeAudio()">Ambiente Cyberpunk (Clic)</div>

  <script>
    // === GEMINI IA + SOA ===
    const GEMINI_API_KEY = "PEGA_TU_API_KEY_AQUÍ"; // ← ¡Reemplaza con tu clave!

    async function generateSketch() {
      const prompt = document.getElementById('prompt').value.trim();
      if (!prompt) return showMessage("Escribe una descripción", true);
      if (!GEMINI_API_KEY.includes('AIza')) return showMessage("Agrega tu API Key de Gemini", true);

      showMessage("Generando con Gemini 1.5 Flash...");
      document.getElementById('result').innerHTML = `<p class="text-gray-600">Procesando IA...</p>`;

      try {
        const response = await fetch(`https://generativelanguage.googleapis.com/v1/models/gemini-1.5-flash:generateContent?key=${GEMINI_API_KEY}`, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            contents: [{ role: "user", parts: [{ text: `Genera una imagen realista en alta resolución: ${prompt}. Estilo artístico profesional.` }] }]
          })
        });

        const data = await response.json();
        if (!data.candidates?.[0]?.content?.parts?.[0]?.text) throw new Error("No image URL");

        const imageUrl = data.candidates[0].content.parts[0].text.match(/https?:\/\/[^\s]+/g)[0];
        const soaCode = "SOA-" + Date.now().toString(36).toUpperCase() + "-" + Math.random().toString(36).substr(2, 3).toUpperCase();

        document.getElementById('result').innerHTML = `
          <img src="${imageUrl}" class="w-full rounded-lg shadow-xl mb-4" alt="Boceto IA">
          <p class="font-bold text-green-600">¡Boceto generado!</p>
          <p class="text-sm">Código SOA: <span class="soa-badge">${soaCode}</span></p>
          <button onclick="navigator.clipboard.writeText('${soaCode}'); showMessage('Código SOA copiado')" class="mt-2 text-xs text-blue-600 underline">Copiar código</button>
          <p class="text-xs text-gray-500 mt-2">Certificado en art5d.cl | RUT 12443942-6</p>
        `;
        showMessage("Boceto IA + SOA Listo");
      } catch (e) {
        showMessage("Error: " + e.message, true);
      }
    }

    // === PayPal, Audio, VR, Tabs ===
    function showTab(tab) {
      document.querySelectorAll('section, main').forEach(el => el.classList.remove('active'));
      document.getElementById(tab === 'main' ? 'main-content' : tab + '-section').classList.add('active');
      document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
      event.target.classList.add('active');
      if (tab === 'vr') initVR();
      if (tab === 'audio') setupAudio();
    }

    function showMessage(msg, error = false) {
      const div = document.createElement('div');
      div.className = 'status-message ' + (error ? 'bg-red-600' : 'bg-green-600');
      div.textContent = msg;
      document.body.appendChild(div);
      setTimeout(() => div.remove(), 4000);
    }

    paypal.Buttons({
      createOrder: (data, actions) => actions.order.create({
        purchase_units: [{ description: "Pack Plata ART5D", amount: { value: "19.99", currency_code: "USD" } }]
      }),
      onApprove: (data, actions) => actions.order.capture().then(d => showMessage(`¡Pago exitoso! ID: ${d.id}`)),
      onError: () => showMessage("Error PayPal", true)
    }).render('#paypal-button-container');

    // Audio y VR (mismo que antes, funcional)
    let isAudioOn = false;
    window.initializeAudio = () => { /* ... */ };
    function initVR() { /* ... */ }

    window.onload = () => showMessage("ART5D.CL con Gemini IA + SOA – 10 Nov 2025");
  </script>
</body>
</html>
