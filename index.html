<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ART5D FÉNIX v5.0 - Certificación SOA + Galería VR</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://www.paypal.com/sdk/js?client-id=AZ6F094119M09V1139N115Q29B2735C4A3P29S4N0P17S216K13T0&currency=USD" async></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r169/three.min.js" defer></script>
  <style>
    body { font-family: 'Inter', sans-serif; background:#f8f9fa; margin:0; }
    .header { background: linear-gradient(135deg, #6B46C1, #D53F8C); color:white; }
    .neon { color:#FFD700; text-shadow:0 0 10px #FFA500; }
    .pack { background:white; border-radius:12px; box-shadow:0 4px 20px rgba(0,0,0,0.1); transition:0.3s; }
    .pack:hover { transform:translateY(-8px); box-shadow:0 15px 35px rgba(0,0,0,0.2); }
    .vangogh { width:60px; height:60px; border:4px solid #FFD700; border-radius:50%; cursor:pointer; animation:pulse 2s infinite; }
    @keyframes pulse { 0%,100%{box-shadow:0 0 15px #FFD700} 50%{box-shadow:0 0 30px #FFA500} }
    #vr, #gemini, #main { display:none; }
    #vr.active, #gemini.active, #main.active { display:block; }
    .tab { @apply px-4 py-2 rounded-lg border font-medium transition; }
    .tab.active { @apply bg-indigo-600 text-white border-indigo-600; }
    #ambient { position:fixed; bottom:20px; right:20px; background:rgba(0,0,0,0.7); color:#FFD700; padding:8px 16px; border-radius:30px; font-size:0.8rem; cursor:pointer; }
  </style>
</head>
<body>
  <header class="header p-6 text-center relative">
    <h1 class="text-5xl font-bold">ART5D <span class="neon">FÉNIX v5.0</span></h1>
    <p class="mt-2 text-lg opacity-90">Certificación SOA + Boceto IA + Galería VR | art5d.cl</p>
    <div class="absolute top-4 right-6 flex items-center gap-3">
      <img class="vangogh" src="https://i.imgur.com/8Q8zX9k.png" onclick="alert('Van Gogh te guiará pronto')">
      <span class="text-xs">RUT 12443942-6</span>
    </div>
  </header>

  <nav class="max-w-6xl mx-auto mt-6 px-4">
    <div class="flex flex-wrap gap-2 justify-center">
      <button class="tab active" onclick="show('main')">Paquetes</button>
      <button class="tab" onclick="show('gemini')">Boceto IA</button>
      <button class="tab" onclick="show('vr')">Galería VR</button>
    </div>
  </nav>

  <!-- PAQUETES -->
  <main id="main" class="active max-w-6xl mx-auto p-6">
    <div class="grid md:grid-cols-3 gap-6">
      <div class="pack p-6 text-center">
        <h3 class="text-2xl font-bold">Bronce</h3>
        <p class="text-4xl font-bold text-teal-600">Gratis</p>
        <ul class="my-4 text-left text-sm"><li>5 imágenes</li><li>Perfil básico</li></ul>
        <button class="w-full py-2 bg-teal-600 text-white rounded-lg">Empezar</button>
      </div>
      <div class="pack p-6 text-center relative">
        <span class="absolute -top-3 left-1/2 -translate-x-1/2 bg-yellow-400 text-black text-xs px-3 py-1 rounded-full font-bold">IA + SOA</span>
        <h3 class="text-2xl font-bold">Plata</h3>
        <p class="text-4xl font-bold text-yellow-600">$19.99</p>
        <ul class="my-4 text-left text-sm"><li>10 imágenes</li><li>1 Boceto IA</li><li>SOA</li></ul>
        <div id="paypal"></div>
      </div>
      <div class="pack p-6 text-center">
        <h3 class="text-2xl font-bold">Oro</h3>
        <p class="text-4xl font-bold text-purple-600">$49.99</p>
        <ul class="my-4 text-left text-sm"><li>15 imágenes</li><li>5 Bocetos IA</li><li>Galería VR</li></ul>
        <button class="w-full py-2 bg-purple-600 text-white rounded-lg">Comprar</button>
      </div>
    </div>
  </main>

  <!-- GEMINI -->
  <section id="gemini" class="max-w-2xl mx-auto p-6">
    <div class="bg-white p-6 rounded-xl shadow-lg">
      <h2 class="text-2xl font-bold text-center mb-4">Genera tu Boceto IA</h2>
      <textarea id="prompt" class="w-full p-3 border rounded" rows="3" placeholder="Ej: Dragón dorado en el cielo de Santiago..."></textarea>
      <button onclick="gen()" class="w-full mt-3 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg font-bold">Generar + Certificar SOA</button>
      <div id="result" class="mt-6 text-center"></div>
    </div>
  </section>

  <!-- VR -->
  <section id="vr" class="w-full h-screen bg-black relative">
    <div class="absolute top-0 left-0 w-full p-4 text-center bg-black bg-opacity-70 text-white z-10">
      <h1 class="text-xl font-bold">Tu Galería VR</h1>
      <p class="text-sm">Arrastra · Rueda para zoom</p>
    </div>
    <canvas id="vr-canvas"></canvas>
  </section>

  <div id="ambient" onclick="toggleAmbient()">Ambiente ON</div>

  <script>
    const API_KEY = "PEGA_TU_GEMINI_KEY_AQUÍ";
    let ambientOn = false;

    function show(id) {
      ['main','gemini','vr'].forEach(x=>document.getElementById(x).classList.remove('active'));
      document.getElementById(id).classList.add('active');
      document.querySelectorAll('.tab').forEach(b=>b.classList.remove('active'));
      event.target.classList.add('active');
      if(id==='vr') initVR();
    }

    async function gen() {
      const p = document.getElementById('prompt').value;
      if(!p) return alert("Describe tu idea");
      document.getElementById('result').innerHTML = "<p>Generando...</p>";
      try {
        const res = await fetch(`https://generativelanguage.googleapis.com/v1/models/gemini-1.5-flash:generateContent?key=${API_KEY}`, {
          method:"POST", headers:{"Content-Type":"application/json"},
          body:JSON.stringify({contents:[{role:"user",parts:[{text:`Imagen realista: ${p}`}]}}])
        });
        const data = await res.json();
        const url = data.candidates[0].content.parts[0].text.match(/https?:\/\/[^\s]+/)[0];
        const soa = "SOA-"+Date.now().toString(36).toUpperCase();
        document.getElementById('result').innerHTML = `
          <img src="${url}" class="w-full rounded-lg shadow-xl mb-4">
          <p class="font-bold text-green-600">¡Certificado!</p>
          <p class="text-sm">Código SOA: <span class="bg-green-100 px-2 py-1 rounded">${soa}</span></p>
        `;
      } catch { alert("Error IA"); }
    }

    paypal.Buttons({createOrder:()=>paypal.OrdersCreate({purchase_units:[{amount:{value:"19.99"}}]})}).render('#paypal');

    let player;
    async function toggleAmbient() {
      if(ambientOn){ player.stop(); ambientOn=false; this.textContent="Ambiente OFF"; return; }
      await Tone.start();
      player = new Tone.Players({
        wind:"https://cdn.freesound.org/previews/243/243009_4028596-lq.mp3",
        rain:"https://cdn.freesound.org/previews/167/167399_71257-lq.mp3"
      }).toDestination();
      player.get('wind').volume.value = -20;
      player.start('wind').start('rain', "+2");
      ambientOn=true;
      this.textContent="Ambiente ON";
    }

    function initVR() {
      const scene = new THREE.Scene();
      const camera = new THREE.PerspectiveCamera(75, innerWidth/innerHeight, 0.1, 1000);
      camera.position.z = 5;
      const renderer = new THREE.WebGLRenderer({canvas:document.getElementById('vr-canvas')});
      renderer.setSize(innerWidth, innerHeight);
      scene.add(new THREE.AmbientLight(0xffffff));
      const geo = new THREE.BoxGeometry(1,1,0.01);
      const mat = new THREE.MeshBasicMaterial({color:0x00ff00});
      const art = new THREE.Mesh(geo, mat);
      scene.add(art);
      function anim() { requestAnimationFrame(anim); renderer.render(scene, camera); }
      anim();
    }

    window.onload = () => setTimeout(toggleAmbient, 2000);
  </script>
</body>
</html>
